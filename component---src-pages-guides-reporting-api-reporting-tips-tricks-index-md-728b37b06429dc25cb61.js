"use strict";(self.webpackChunkdev_site_documentation_template=self.webpackChunkdev_site_documentation_template||[]).push([[188],{6497:function(t,e,a){a.r(e),a.d(e,{_frontmatter:function(){return i},default:function(){return u}});var n=a(87462),r=a(63366),d=(a(15007),a(64983)),l=a(99536),m=["components"],i={},o={_frontmatter:i},p=l.Z;function u(t){var e=t.components,a=(0,r.Z)(t,m);return(0,d.mdx)(p,(0,n.Z)({},o,a,{components:e,mdxType:"MDXLayout"}),(0,d.mdx)("h1",{id:"report-api-report-api"},"Report API {#report-api}"),(0,d.mdx)("p",null,"User Interface has managed roles for customers and for the enablement (Adobe) team. Customers can access the portal, and can then create and edit their configurations. They can also see the reports for their ads impressions on the user interface."),(0,d.mdx)("p",null,"APIs work behind the scenes to facilitate customers and administrators in communicating with the backend infrastructure."),(0,d.mdx)("h2",{id:"api-endpoint-report-api-endpoint"},"API endpoint {#report-api-endpoint}"),(0,d.mdx)("h3",{id:"production-production"},"Production {#production}"),(0,d.mdx)("p",null,(0,d.mdx)("inlineCode",{parentName:"p"},"https://dai-primetime.adobe.io/report")),(0,d.mdx)("h3",{id:"sandbox-sandbox"},"Sandbox {#sandbox}"),(0,d.mdx)("p",null,(0,d.mdx)("inlineCode",{parentName:"p"},"https://dai-sandbox1-primetime.adobe.io/report")),(0,d.mdx)("h2",{id:"query-parameters"},"Query Parameters"),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Name"),(0,d.mdx)("th",{parentName:"tr",align:null},"Significance"),(0,d.mdx)("th",{parentName:"tr",align:null},"Value Type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Mandatory?"),(0,d.mdx)("th",{parentName:"tr",align:null},"Default   Value"),(0,d.mdx)("th",{parentName:"tr",align:null},"Constraints"),(0,d.mdx)("th",{parentName:"tr",align:null},"Example/   Valid Sample values"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"endDate"),(0,d.mdx)("td",{parentName:"tr",align:null},"Ending date for the report data"),(0,d.mdx)("td",{parentName:"tr",align:null},"date"),(0,d.mdx)("td",{parentName:"tr",align:null},"Y"),(0,d.mdx)("td",{parentName:"tr",align:null},"NONE"),(0,d.mdx)("td",{parentName:"tr",align:null},"not newer than yesterday in UTC-8"),(0,d.mdx)("td",{parentName:"tr",align:null},"########")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"filters"),(0,d.mdx)("td",{parentName:"tr",align:null},"filter on one or more columns"),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"N"),(0,d.mdx)("td",{parentName:"tr",align:null},"NONE"),(0,d.mdx)("td",{parentName:"tr",align:null},"ad_config_id , zone_id"),(0,d.mdx)("td",{parentName:"tr",align:null},"ad_config_id=990,900;state=active")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null},"When metaData is set to 'true' in the request, then you can also   filter by name."),(0,d.mdx)("td",{parentName:"tr",align:null})),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null},"Multiple filter   keys are semi-colon separated.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null},"Use   comma-separated values to provide a list of values for filter key")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"groupBy"),(0,d.mdx)("td",{parentName:"tr",align:null},"Group by on time ( year ","|"," month ","|","   day) or ad_config_id. Adconfig is synonymous of AdRule."),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"N"),(0,d.mdx)("td",{parentName:"tr",align:null},"NONE"),(0,d.mdx)("td",{parentName:"tr",align:null},"y ","|"," m ","|"," d  ,   ad_config_id"),(0,d.mdx)("td",{parentName:"tr",align:null},"m , ad_config_id")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null})),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null},"For groupBy on time provide either one of  y or m or d")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null})))),(0,d.mdx)("h2",{id:"headers-headers"},"Headers {#headers}"),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Name"),(0,d.mdx)("th",{parentName:"tr",align:null},"Value type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Mandatory"),(0,d.mdx)("th",{parentName:"tr",align:null},"Sample value"),(0,d.mdx)("th",{parentName:"tr",align:null},"Significance"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"Accept"),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"Y"),(0,d.mdx)("td",{parentName:"tr",align:null},"text/csv  for CSV"),(0,d.mdx)("td",{parentName:"tr",align:null},"Type of response expected from API")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null}),(0,d.mdx)("td",{parentName:"tr",align:null},"application/json or '",(0,d.mdx)("em",{parentName:"td"},"/"),"'  for JSON"),(0,d.mdx)("td",{parentName:"tr",align:null})),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"Authorization   token"),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"Y"),(0,d.mdx)("td",{parentName:"tr",align:null},"xyz"),(0,d.mdx)("td",{parentName:"tr",align:null},"authorization token")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"x-api-key"),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"Y"),(0,d.mdx)("td",{parentName:"tr",align:null},"xyz"),(0,d.mdx)("td",{parentName:"tr",align:null},"API key")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"x-gw-ims-org-id"),(0,d.mdx)("td",{parentName:"tr",align:null},"string"),(0,d.mdx)("td",{parentName:"tr",align:null},"Y"),(0,d.mdx)("td",{parentName:"tr",align:null},"xyz12345"),(0,d.mdx)("td",{parentName:"tr",align:null},"IMS org Id of your account")))),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("p",{parentName:"li"},"You can generate the Authorization token (also known as access token) by following the steps detailed out in Adobe.io's JWT authentication help-page."),(0,d.mdx)("blockquote",{parentName:"li"},(0,d.mdx)("p",{parentName:"blockquote"},"[!NOTE]","\nAuthorisation token has an expiry of 24 hours, so if you are using Report API using a recurring script, then make sure you generate auth token before its expiry or when you get an Oauth error about token not being valid."))),(0,d.mdx)("li",{parentName:"ul"},(0,d.mdx)("p",{parentName:"li"},"To set the correct values in the request header and to generate Authorization token (using JWT authentication) you will need to know the below configurations for your account. Please get in touch with Primetime Support team to get these values.\nTechnical account id"),(0,d.mdx)("ul",{parentName:"li"},(0,d.mdx)("li",{parentName:"ul"},"Org id"),(0,d.mdx)("li",{parentName:"ul"},"Api_key"),(0,d.mdx)("li",{parentName:"ul"},"Client_secret")))),(0,d.mdx)("h2",{id:"output-output"},"Output {#output}"),(0,d.mdx)("p",null,"The result of Report API query by default is in JSON format which specifies impressions against the different values of the dimensions (groupby param) requested. Sample output is given below:"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-JSON"},'\n[\n    {\n        "dates": "07-2020",\n        "total_impressions": 213007041\n    },\n    {\n        "dates": "08-2020",\n        "total_impressions": 174711626\n    },\n    {\n        "dates": "09-2020",\n        "total_impressions": 102863153\n    }\n]\n')),(0,d.mdx)("h2",{id:"error-codes-and-strings-error-codes-strings"},"Error Codes and Strings {#error-codes-strings}"),(0,d.mdx)("h3",{id:"error-response-format-error-response-format"},"Error Response Format {#error-response-format}"),(0,d.mdx)("p",null,"Error rendering macro 'code': Invalid value specified for parameter ",(0,d.mdx)("inlineCode",{parentName:"p"},"com.atlassian.confluence.ext.code.render.InvalidValueException")),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-Shell"},'{\n"error_code": "<ERROR_CODE>",\n"message": "<ERROR_MESSAGE>"\n}\n')),(0,d.mdx)("p",null,"The table below lists down the Error codes and messages that Report API can return. For errors related to authorization layer, refer the ",(0,d.mdx)("a",{parentName:"p",href:"https://experienceleague.adobe.com/docs/experience-platform/landing/troubleshooting.html?lang=en#errors-and-troubleshooting"},"error code documentation")," of Adobe.io."),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Error Code"),(0,d.mdx)("th",{parentName:"tr",align:null},"Error   Message"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"4001007"),(0,d.mdx)("td",{parentName:"tr",align:null},"User   detail is invalid.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"4001008"),(0,d.mdx)("td",{parentName:"tr",align:null},"All   zones are not from same account.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"5001010"),(0,d.mdx)("td",{parentName:"tr",align:null},"An   internal error occurred.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"4001011"),(0,d.mdx)("td",{parentName:"tr",align:null},"Dates   are not sent in required format.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"4001012"),(0,d.mdx)("td",{parentName:"tr",align:null},"Dates   are out of range.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"4001013"),(0,d.mdx)("td",{parentName:"tr",align:null},"Mandatory   Parameter is missing.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"4001014"),(0,d.mdx)("td",{parentName:"tr",align:null},"Zone   list is empty for the account.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"4001015"),(0,d.mdx)("td",{parentName:"tr",align:null},"Invalid   Filter keys in request.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"4001016"),(0,d.mdx)("td",{parentName:"tr",align:null},"Invalid   GroupBy option in request.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"4001017"),(0,d.mdx)("td",{parentName:"tr",align:null},"Invalid   ID is provided in request")))),(0,d.mdx)("h2",{id:"sample-calls-and-expected-results-sample-calls-expected-results"},"Sample Calls and expected results {#sample-calls-expected-results}"),(0,d.mdx)("p",null,"Following is the curl command to get monthly impression counts between 2020-07-01 and 2021-06-30 using access token:"),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Reporting API call example")),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-shell"},"\ncurl --location --request GET 'https://dai-sandbox1-primetime.adobe.io/report?startDate=2020-07-01&endDate=2021-06-30&groupBy=m&unpaged=true' \\\n--header 'x-api-key: <API_KEY>' \\\n--header 'x-gw-ims-org-id: <ORG_ID>' \\\n--header 'Authorization: Bearer <ACCESS_TOKEN_STRING>' \\\n--header 'Accept: application/json'\n\n")),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Sample Call/ Use case"),(0,d.mdx)("th",{parentName:"tr",align:null},"Expected Result"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"Fetch Report with start and end dates  GET: ","[API_ENDPOINT]","/report?startDate=2020-01-01&endDate=2021-01-01 header : Accept = application/json. or ",(0,d.mdx)("em",{parentName:"td"},"/")),(0,d.mdx)("td",{parentName:"tr",align:null},"Json with following parameters with all the ads belonging to this account total_impressions")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"Fetch Report with GroupBy = d ","|"," m ","|"," y GET: ","[API_ENDPOINT]","//report?startDate=2020-01-01&endDate=2020-05-01&groupBy=d ","|"," m ","|"," y header : Accept = application/json. or ",(0,d.mdx)("em",{parentName:"td"},"/")),(0,d.mdx)("td",{parentName:"tr",align:null},"Json with following parameters with all the ads belonging to this account  dates (mm-dd-yyyy ","|"," mm-yyyy ","|"," yyyy format) total_impressions")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"Fetch Report with GroupBy = ad_config_id GET: ","[API_ENDPOINT]","/report?startDate=2020-01-01&endDate=2020-05-01&groupBy=ad_config_id header : Accept = application/json. or ",(0,d.mdx)("em",{parentName:"td"},"/")),(0,d.mdx)("td",{parentName:"tr",align:null},"Json with following parameters with all the ads belonging to this account  ad_config_id total_impressions")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"Fetch Report with GroupBy =  d ","|"," m ","|"," y and  ad_config_id GET: ","[API_ENDPOINT]","/report?startDate=2020-01-01&endDate=2020-05-01&groupBy=d,ad_config_id header : Accept = application/json. or ",(0,d.mdx)("em",{parentName:"td"},"/")),(0,d.mdx)("td",{parentName:"tr",align:null},"Json with following parameters with all the ads belonging to this account  ad_config_id dates (mm-dd-yyyy ","|"," mm-yyyy ","|"," yyyy format) total_impressions")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"Fetch Report with metaData=true and groupBy=d ","|"," m ","|"," y GET: ","[API_ENDPOINT]","/report?startDate=2020-01-01&endDate=2020-05-01&metaData=true&groupBy=ad_config_id header : Accept = application/json. or ",(0,d.mdx)("em",{parentName:"td"},"/")),(0,d.mdx)("td",{parentName:"tr",align:null},"Json with following parameters with all the ads belonging to this account ad_config_id name total_impressions")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"Fetch Report with groupBy=d ","|"," m ","|"," y and ad_config_id GET: ","[API_ENDPOINT]","/report?startDate=2020-01-01&endDate=2020-05-01&metaData=true&groupBy=d ","|"," m ","|"," y,ad_config_id header : Accept = application/json. or ",(0,d.mdx)("em",{parentName:"td"},"/")),(0,d.mdx)("td",{parentName:"tr",align:null},"Json with following parameters with all the ads belonging to this account ad_config_id name total_impressions dates (mm-dd-yyyy ","|"," mm-yyyy ","|"," yyyy format)")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"Fetch Report to get all the rows for a given date range (with unpaged = true) GET: ","[API_ENDPOINT]","/report?startDate=2020-01-01&endDate=2020-01-31&groupBy=d&unpaged=true"),(0,d.mdx)("td",{parentName:"tr",align:null},"31 entries in the returned Json array")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"Fetch Report with valid page query parameters GET: ","[API_ENDPOINT]","/report?startDate=2020-01-01&endDate=2020-01-31&page=0&size=5&groupBy=d"),(0,d.mdx)("td",{parentName:"tr",align:null},"5 entries in the returned array")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"Fetch Report, with csv format GET: ","[API_ENDPOINT]","/report?startDate=2020-01-01&endDate=2020-01-10 header : Accept = text/csv"),(0,d.mdx)("td",{parentName:"tr",align:null},"CSV string is returned, with header: total_impressions")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"Fetch Report, with csv format , and groupBy = d ","|"," m ","|"," y GET: ","[API_ENDPOINT]","/report?startDate=2020-01-01&endDate=2020-01-10&groupBy=d","|","m","|","y header : Accept = text/csv"),(0,d.mdx)("td",{parentName:"tr",align:null},"CSV string is returned, with header: total_impressions dates (mm-dd-yyyy ","|"," mm-yyyy ","|"," yyyy format)")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"Fetch Report, with csv format , and metadata = true GET: ","[API_ENDPOINT]","/report?startDate=2020-01-01&endDate=2020-01-10&metaData=true header : Accept = text/csv"),(0,d.mdx)("td",{parentName:"tr",align:null},"CSV string is returned, with header: total_impressions")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},"Fetch Report, with csv format , metadata = true, and groupBy = d ","|"," m ","|"," y GET: ","[API_ENDPOINT]","/report?startDate=2020-01-01&endDate=2020-01-10&metaData=true&groupBy=d","|","m","|","y header : Accept = text/csv"),(0,d.mdx)("td",{parentName:"tr",align:null},"CSV string is returned, with header: total_impressions dates (mm-dd-yyyy ","|"," mm-yyyy ","|"," yyyy format)")))),(0,d.mdx)("h2",{id:"report-api-throttling-policy-report-api-throttling-policy"},"Report API Throttling Policy {#report-api-throttling-policy}"),(0,d.mdx)("ul",null,(0,d.mdx)("li",{parentName:"ul"},"5 API requests are allowed during a 5 second window for each user."),(0,d.mdx)("li",{parentName:"ul"},"If a user crosses above limit, response is delayed by 5 seconds."),(0,d.mdx)("li",{parentName:"ul"},'If a user makes more than 10 calls within 5 second window, they will start getting rejected with response "429 Too many requests".')))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-reporting-api-reporting-tips-tricks-index-md-728b37b06429dc25cb61.js.map